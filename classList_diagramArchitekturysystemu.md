# ğŸ“ KOMPLETNA LISTA KLAS I DIAGRAM ARCHITEKTURY

***

## ğŸ“¦ WSZYSTKIE KLASY PROJEKTU (Alfabetycznie z peÅ‚nÄ… Å›cieÅ¼kÄ…)

### ğŸ“ **Package: com.smsgateway.beauty** (Root)

```kotlin
// 1. Application Class
com.smsgateway.beauty.GatewayApplication : Application
```

***

### ğŸ“ **Package: com.smsgateway.beauty.api**

```kotlin
// 2. HTTP Server
com.smsgateway.beauty.api.KtorServer
```

***

### ğŸ“ **Package: com.smsgateway.beauty.api.dto**

```kotlin
// 3-6. Data Transfer Objects
com.smsgateway.beauty.api.dto.ApiResponse
com.smsgateway.beauty.api.dto.QueueSmsRequest
com.smsgateway.beauty.api.dto.QueueSmsResponse
com.smsgateway.beauty.api.dto.SmsDetail
com.smsgateway.beauty.api.dto.SmsStatusResponse
```

***

### ğŸ“ **Package: com.smsgateway.beauty.api.middleware**

```kotlin
// 7. Middleware Extension Function (w pliku AuthMiddleware.kt)
// Extension: ApplicationCall.verifyAuth(encryptedStorage: EncryptedStorage): Boolean
```

***

### ğŸ“ **Package: com.smsgateway.beauty.api.routes**

```kotlin
// 8-9. Route Extension Functions
// Extension: Route.setupSmsRoutes(context: Context, encryptedStorage: EncryptedStorage)
// Extension: Route.setupWebRoutes(context: Context)
```

***

### ğŸ“ **Package: com.smsgateway.beauty.data**

```kotlin
// 10. Enum
com.smsgateway.beauty.data.SmsStatus : Enum<SmsStatus>

// 11-13. Data Classes / Entities
com.smsgateway.beauty.data.AppSettings
com.smsgateway.beauty.data.SmsMessage : @Entity
com.smsgateway.beauty.data.SystemLog : @Entity
```

***

### ğŸ“ **Package: com.smsgateway.beauty.service**

```kotlin
// 14. Broadcast Receiver
com.smsgateway.beauty.service.BootReceiver : BroadcastReceiver

// 15. Helper Class
com.smsgateway.beauty.service.CloudflareManager

// 16. Broadcast Receiver
com.smsgateway.beauty.service.DeliveryReceiver : BroadcastReceiver

// 17. Foreground Service
com.smsgateway.beauty.service.SmsSchedulerService : Service

// 18. Service Class
com.smsgateway.beauty.service.SmsSenderService
```

***

### ğŸ“ **Package: com.smsgateway.beauty.storage**

```kotlin
// 19. DAO Interface
com.smsgateway.beauty.storage.LogDao : @Dao

// 20. Room Database
com.smsgateway.beauty.storage.SmsDatabase : RoomDatabase

// 21. DAO Interface
com.smsgateway.beauty.storage.SmsDao : @Dao

// 22. Security Class
com.smsgateway.beauty.storage.EncryptedStorage

// 23. Preferences Manager
com.smsgateway.beauty.storage.PreferencesManager
```

***

### ğŸ“ **Package: com.smsgateway.beauty.ui**

```kotlin
// 24. Main Activity
com.smsgateway.beauty.ui.MainActivity : AppCompatActivity
```

***

### ğŸ“ **Package: com.smsgateway.beauty.utils**

```kotlin
// 25. Object (Singleton)
com.smsgateway.beauty.utils.BatteryOptimizer : object

// 26. Object (Singleton)
com.smsgateway.beauty.utils.DateTimeHelper : object

// 27. Object (Singleton)
com.smsgateway.beauty.utils.LogManager : object

// 28. Object (Singleton)
com.smsgateway.beauty.utils.SecurityUtils : object
```

***

## ğŸ“Š PODSUMOWANIE STATYSTYK KLAS

| Kategoria | Liczba | Typy |
|-----------|--------|------|
| **Total Classes** | 28 | - |
| **Kotlin Classes** | 15 | class |
| **Data Classes** | 7 | data class |
| **Entities (Room)** | 2 | @Entity |
| **Interfaces (DAO)** | 2 | @Dao interface |
| **Enums** | 1 | enum class |
| **Singletons (Object)** | 4 | object |
| **Services** | 1 | Service |
| **Receivers** | 2 | BroadcastReceiver |
| **Activities** | 1 | AppCompatActivity |
| **Application** | 1 | Application |
| **Extension Functions** | 3 | (w plikach routes/middleware) |

***

## ğŸ“‹ LISTA KLAS WEDÅUG KATEGORII FUNKCJONALNEJ

### ğŸ”· **WARSTWA APLIKACJI** (1 klasa)
```
1. GatewayApplication
```

### ğŸ”· **WARSTWA UI** (1 klasa)
```
2. MainActivity
```

### ğŸ”· **WARSTWA API** (9 klas/funkcji)
```
3. KtorServer
4. ApiResponse
5. QueueSmsRequest
6. QueueSmsResponse
7. SmsDetail
8. SmsStatusResponse
9. AuthMiddleware (extension)
10. SmsRoutes (extension)
11. WebRoutes (extension)
```

### ğŸ”· **WARSTWA DANYCH** (4 klasy)
```
12. SmsStatus (enum)
13. SmsMessage (entity)
14. SystemLog (entity)
15. AppSettings (data class)
```

### ğŸ”· **WARSTWA STORAGE** (5 klas)
```
16. SmsDatabase
17. SmsDao
18. LogDao
19. EncryptedStorage
20. PreferencesManager
```

### ğŸ”· **WARSTWA SERWISÃ“W** (5 klas)
```
21. SmsSchedulerService
22. SmsSenderService
23. DeliveryReceiver
24. BootReceiver
25. CloudflareManager
```

### ğŸ”· **WARSTWA UTILS** (4 klasy - singletons)
```
26. BatteryOptimizer
27. DateTimeHelper
28. LogManager
29. SecurityUtils
```

***

## ğŸ¨ DIAGRAM ARCHITEKTURY SYSTEMU

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXTERNAL WORLD                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  TypeScript App â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Cloudflare Tunnelâ”œâ”€â”€â”€â”€â”€â”€â”¤  Web Browser  â”‚ â”‚
â”‚  â”‚  (Booking Sys)  â”‚  HTTPS  â”‚   (External)     â”‚      â”‚  (Dashboard)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                           â”‚                         â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ REST API                  â”‚                         â”‚ HTTP
            â”‚ POST /api/sms/queue       â”‚ Tunnel                  â”‚ GET /dashboard
            â”‚ GET  /api/sms/status      â”‚                         â”‚
            â”‚                           â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ANDROID APPLICATION LAYER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      GatewayApplication                               â”‚ â”‚
â”‚  â”‚  â€¢ onCreate() - Initialize all components                            â”‚ â”‚
â”‚  â”‚  â€¢ Start KtorServer                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Start SmsSchedulerService                                         â”‚ â”‚
â”‚  â”‚  â€¢ Initialize LogManager                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                          MainActivity                                 â”‚ â”‚
â”‚  â”‚  â€¢ Request SMS permissions                                           â”‚ â”‚
â”‚  â”‚  â€¢ Request Battery Optimization whitelist                            â”‚ â”‚
â”‚  â”‚  â€¢ Show simple status UI                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           API LAYER (Ktor Server)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          KtorServer                                   â”‚â”‚
â”‚  â”‚  Port: 8080                                                           â”‚â”‚
â”‚  â”‚  â€¢ ContentNegotiation (Gson)                                          â”‚â”‚
â”‚  â”‚  â€¢ CORS                                                               â”‚â”‚
â”‚  â”‚  â€¢ Request Logging                                                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚                         â”‚                         â”‚                 â”‚
â”‚    â”‚                         â”‚                         â”‚                 â”‚
â”‚  â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ WebRoutes   â”‚  â”‚    SmsRoutes         â”‚  â”‚ AuthMiddleware    â”‚      â”‚
â”‚  â”‚             â”‚  â”‚                      â”‚  â”‚                   â”‚      â”‚
â”‚  â”‚ GET /       â”‚  â”‚ POST /api/sms/queue  â”‚  â”‚ verifyAuth()      â”‚      â”‚
â”‚  â”‚ GET /dash   â”‚  â”‚ GET  /api/sms/status â”‚  â”‚ â€¢ Bearer Token    â”‚      â”‚
â”‚  â”‚ GET /logs   â”‚  â”‚ GET  /api/sms/list   â”‚  â”‚ â€¢ Validation      â”‚      â”‚
â”‚  â”‚ GET /settingsâ”‚ â”‚ DELETE /api/sms/:id  â”‚  â”‚                   â”‚      â”‚
â”‚  â”‚             â”‚  â”‚ GET  /api/logs       â”‚  â”‚                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                              â”‚                         â”‚                 â”‚
â”‚                              â”‚                         â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  â”‚                           â”‚                                           â”‚
â”‚  â”‚  DTO Classes:             â”‚                                           â”‚
â”‚  â”‚  â€¢ QueueSmsRequest        â”‚                                           â”‚
â”‚  â”‚  â€¢ QueueSmsResponse       â”‚                                           â”‚
â”‚  â”‚  â€¢ SmsStatusResponse      â”‚                                           â”‚
â”‚  â”‚  â€¢ SmsDetail              â”‚                                           â”‚
â”‚  â”‚  â€¢ ApiResponse            â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVICE LAYER (Business Logic)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                     SmsSchedulerService                               â”‚â”‚
â”‚  â”‚  (Foreground Service - DATA_SYNC)                                    â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  LOOP (every 60s):                                                   â”‚â”‚
â”‚  â”‚    1. getPendingMessages(currentTime)                                â”‚â”‚
â”‚  â”‚    2. Check sending hours (8-21)                                     â”‚â”‚
â”‚  â”‚    3. Check maxRetries                                               â”‚â”‚
â”‚  â”‚    4. Call SmsSenderService.sendSms()                                â”‚â”‚
â”‚  â”‚    5. Rate limit: 500ms between SMS                                  â”‚â”‚
â”‚  â”‚    6. Update notification                                            â”‚â”‚
â”‚  â”‚    7. cleanupOldData()                                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                             â”‚
â”‚                              â”‚ uses                                        â”‚
â”‚                              â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      SmsSenderService                                 â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  sendSms(message):                                                   â”‚â”‚
â”‚  â”‚    1. Update status â†’ SENDING                                        â”‚â”‚
â”‚  â”‚    2. Create PendingIntents (sent/delivered)                         â”‚â”‚
â”‚  â”‚    3. SmsManager.sendTextMessage()                                   â”‚â”‚
â”‚  â”‚    4. Catch exceptions â†’ FAILED                                      â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  updateMessageStatus(id, status, error)                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                             â”‚
â”‚                              â”‚ triggers                                    â”‚
â”‚                              â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      DeliveryReceiver                                 â”‚â”‚
â”‚  â”‚  (BroadcastReceiver)                                                 â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  onReceive(intent):                                                  â”‚â”‚
â”‚  â”‚    â€¢ SMS_SENT action:                                                â”‚â”‚
â”‚  â”‚      - RESULT_OK â†’ SENT                                              â”‚â”‚
â”‚  â”‚      - RESULT_ERROR_* â†’ FAILED                                       â”‚â”‚
â”‚  â”‚    â€¢ SMS_DELIVERED action:                                           â”‚â”‚
â”‚  â”‚      - RESULT_OK â†’ DELIVERED                                         â”‚â”‚
â”‚  â”‚      - RESULT_CANCELED â†’ NOT_DELIVERED                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        BootReceiver                                   â”‚â”‚
â”‚  â”‚  (BroadcastReceiver)                                                 â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  onReceive(ACTION_BOOT_COMPLETED):                                   â”‚â”‚
â”‚  â”‚    â€¢ Check settings.schedulerEnabled                                 â”‚â”‚
â”‚  â”‚    â€¢ Start SmsSchedulerService                                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      CloudflareManager                                â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ isConfigured()                                                    â”‚â”‚
â”‚  â”‚  â€¢ getPublicUrl()                                                    â”‚â”‚
â”‚  â”‚  â€¢ getSetupInstructions()                                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      STORAGE LAYER (Persistence)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        SmsDatabase                                    â”‚â”‚
â”‚  â”‚  (Room Database - Singleton)                                         â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Entities:                                                           â”‚â”‚
â”‚  â”‚    â€¢ SmsMessage (18 fields)                                          â”‚â”‚
â”‚  â”‚    â€¢ SystemLog (7 fields)                                            â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  DAOs:                                                               â”‚â”‚
â”‚  â”‚    â€¢ SmsDao                                                          â”‚â”‚
â”‚  â”‚    â€¢ LogDao                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                              â”‚                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚                         â”‚                         â”‚                 â”‚
â”‚  â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    SmsDao       â”‚  â”‚     LogDao          â”‚  â”‚ EncryptedStorage    â”‚ â”‚
â”‚  â”‚  (Interface)    â”‚  â”‚  (Interface)        â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚                 â”‚  â”‚                     â”‚  â”‚ â€¢ MasterKey         â”‚ â”‚
â”‚  â”‚ â€¢ getAllMsg()   â”‚  â”‚ â€¢ getRecentLogs()   â”‚  â”‚ â€¢ AES256_GCM        â”‚ â”‚
â”‚  â”‚ â€¢ getByStatus() â”‚  â”‚ â€¢ getLogsByLevel()  â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ getById()     â”‚  â”‚ â€¢ getLogsSince()    â”‚  â”‚ saveApiToken()      â”‚ â”‚
â”‚  â”‚ â€¢ getByExtId()  â”‚  â”‚ â€¢ insertLog()       â”‚  â”‚ getApiToken()       â”‚ â”‚
â”‚  â”‚ â€¢ getPending()  â”‚  â”‚ â€¢ deleteOldLogs()   â”‚  â”‚ generateNewToken()  â”‚ â”‚
â”‚  â”‚ â€¢ insert()      â”‚  â”‚ â€¢ getErrorCount()   â”‚  â”‚ clearToken()        â”‚ â”‚
â”‚  â”‚ â€¢ update()      â”‚  â”‚                     â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ delete()      â”‚  â”‚                     â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ getCount()    â”‚  â”‚                     â”‚  â”‚                     â”‚ â”‚
â”‚  â”‚ â€¢ deleteOld()   â”‚  â”‚                     â”‚  â”‚                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      PreferencesManager                               â”‚â”‚
â”‚  â”‚  (SharedPreferences Wrapper)                                         â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ saveSettings(AppSettings)                                         â”‚â”‚
â”‚  â”‚  â€¢ getSettings(): AppSettings                                        â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Settings (14 params):                                               â”‚â”‚
â”‚  â”‚    - apiEnabled, apiPort                                             â”‚â”‚
â”‚  â”‚    - cloudflareEnabled, tunnelId, hostname                           â”‚â”‚
â”‚  â”‚    - schedulerEnabled, checkIntervalSeconds                          â”‚â”‚
â”‚  â”‚    - autoSend, sendHour, sendHourEnd, maxRetries                     â”‚â”‚
â”‚  â”‚    - logLevel, logRetentionDays                                      â”‚â”‚
â”‚  â”‚    - batteryOptimizationDisabled                                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATA LAYER (Models & Enums)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          SmsMessage                                   â”‚â”‚
â”‚  â”‚  @Entity(tableName = "sms_messages")                                 â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Fields (18):                                                        â”‚â”‚
â”‚  â”‚    â€¢ id: Long (PK, auto)                                             â”‚â”‚
â”‚  â”‚    â€¢ phoneNumber: String                                             â”‚â”‚
â”‚  â”‚    â€¢ message: String                                                 â”‚â”‚
â”‚  â”‚    â€¢ status: String                                                  â”‚â”‚
â”‚  â”‚    â€¢ queuedAt: Long                                                  â”‚â”‚
â”‚  â”‚    â€¢ scheduledFor: Long                                              â”‚â”‚
â”‚  â”‚    â€¢ sentAt: Long?                                                   â”‚â”‚
â”‚  â”‚    â€¢ deliveredAt: Long?                                              â”‚â”‚
â”‚  â”‚    â€¢ failedAt: Long?                                                 â”‚â”‚
â”‚  â”‚    â€¢ externalId: String?                                             â”‚â”‚
â”‚  â”‚    â€¢ clientName: String?                                             â”‚â”‚
â”‚  â”‚    â€¢ serviceType: String?                                            â”‚â”‚
â”‚  â”‚    â€¢ errorMessage: String?                                           â”‚â”‚
â”‚  â”‚    â€¢ retryCount: Int                                                 â”‚â”‚
â”‚  â”‚    â€¢ maxRetries: Int                                                 â”‚â”‚
â”‚  â”‚    â€¢ deliveryStatus: String?                                         â”‚â”‚
â”‚  â”‚    â€¢ operatorStatus: String?                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          SystemLog                                    â”‚â”‚
â”‚  â”‚  @Entity(tableName = "system_logs")                                  â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Fields (7):                                                         â”‚â”‚
â”‚  â”‚    â€¢ id: Long (PK, auto)                                             â”‚â”‚
â”‚  â”‚    â€¢ timestamp: Long                                                 â”‚â”‚
â”‚  â”‚    â€¢ level: String (DEBUG/INFO/WARNING/ERROR)                        â”‚â”‚
â”‚  â”‚    â€¢ category: String (SMS/API/SCHEDULER/SYSTEM)                     â”‚â”‚
â”‚  â”‚    â€¢ message: String                                                 â”‚â”‚
â”‚  â”‚    â€¢ smsId: Long?                                                    â”‚â”‚
â”‚  â”‚    â€¢ stackTrace: String?                                             â”‚â”‚
â”‚  â”‚    â€¢ meta String? (JSON)                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          SmsStatus                                    â”‚â”‚
â”‚  â”‚  enum class                                                          â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Values (7):                                                         â”‚â”‚
â”‚  â”‚    â€¢ QUEUED                                                          â”‚â”‚
â”‚  â”‚    â€¢ SENDING                                                         â”‚â”‚
â”‚  â”‚    â€¢ SENT                                                            â”‚â”‚
â”‚  â”‚    â€¢ DELIVERED                                                       â”‚â”‚
â”‚  â”‚    â€¢ NOT_DELIVERED                                                   â”‚â”‚
â”‚  â”‚    â€¢ FAILED                                                          â”‚â”‚
â”‚  â”‚    â€¢ DELETED                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        AppSettings                                    â”‚â”‚
â”‚  â”‚  data class                                                          â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Fields (14): apiEnabled, apiPort, apiToken, cloudflareEnabled, ...  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UTILS LAYER (Helpers & Tools)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        LogManager                                     â”‚â”‚
â”‚  â”‚  object (Singleton)                                                  â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ init(context)                                                     â”‚â”‚
â”‚  â”‚  â€¢ d(category, message, smsId?) - DEBUG                              â”‚â”‚
â”‚  â”‚  â€¢ i(category, message, smsId?) - INFO                               â”‚â”‚
â”‚  â”‚  â€¢ w(category, message, smsId?) - WARNING                            â”‚â”‚
â”‚  â”‚  â€¢ e(category, message, throwable?, smsId?) - ERROR                  â”‚â”‚
â”‚  â”‚  â€¢ cleanOldLogs(retentionDays)                                       â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  Integration:                                                        â”‚â”‚
â”‚  â”‚    â€¢ Timber (console)                                                â”‚â”‚
â”‚  â”‚    â€¢ Room Database (persistent)                                      â”‚â”‚
â”‚  â”‚    â€¢ Coroutines (async)                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      DateTimeHelper                                   â”‚â”‚
â”‚  â”‚  object (Singleton)                                                  â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ parseIso8601(dateString): Long                                    â”‚â”‚
â”‚  â”‚  â€¢ toIso8601(timestamp): String                                      â”‚â”‚
â”‚  â”‚  â€¢ formatDisplay(timestamp): String                                  â”‚â”‚
â”‚  â”‚  â€¢ calculateSendTime(appointmentTime): Long  // -24h                 â”‚â”‚
â”‚  â”‚  â€¢ isWithinSendingHours(timestamp, start, end): Boolean              â”‚â”‚
â”‚  â”‚  â€¢ getStartOfDay(): Long                                             â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      SecurityUtils                                    â”‚â”‚
â”‚  â”‚  object (Singleton)                                                  â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ generateApiToken(): String  // sk_live_ + 256-bit random          â”‚â”‚
â”‚  â”‚  â€¢ validatePhoneNumber(phone): Boolean                               â”‚â”‚
â”‚  â”‚  â€¢ sanitizePhoneNumber(phone): String                                â”‚â”‚
â”‚  â”‚  â€¢ validateToken(provided, stored): Boolean  // constant-time        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                     BatteryOptimizer                                  â”‚â”‚
â”‚  â”‚  object (Singleton)                                                  â”‚â”‚
â”‚  â”‚                                                                       â”‚â”‚
â”‚  â”‚  â€¢ isBatteryOptimizationDisabled(context): Boolean                   â”‚â”‚
â”‚  â”‚  â€¢ requestDisableBatteryOptimization(activity)                       â”‚â”‚
â”‚  â”‚  â€¢ openBatterySettings(context)                                      â”‚â”‚
â”‚  â”‚  â€¢ getBatteryOptimizationTips(): List<String>                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ANDROID SYSTEM LAYER (SDK)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  â€¢ SmsManager - SMS wysyÅ‚anie                                             â”‚
â”‚  â€¢ PowerManager - Wake locks, battery optimization                        â”‚
â”‚  â€¢ NotificationManager - Foreground service notification                  â”‚
â”‚  â€¢ SharedPreferences - Settings storage                                   â”‚
â”‚  â€¢ Room Database - SQLite wrapper                                         â”‚
â”‚  â€¢ Android Keystore - Encryption keys                                     â”‚
â”‚  â€¢ BroadcastReceiver - SMS delivery reports, Boot events                  â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

***

## ğŸ”— FLOW DIAGRAM - WysyÅ‚anie SMS (End-to-End)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLOW: Queue SMS â†’ Delivery Report                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. EXTERNAL APP (TypeScript)
   â”‚
   â”‚ POST /api/sms/queue
   â”‚ {
   â”‚   phone: "+48123456789",
   â”‚   message: "Przypominamy...",
   â”‚   scheduledTime: "2025-10-28T14:00:00Z"
   â”‚ }
   â”‚
   â–¼

2. KtorServer (Port 8080)
   â”‚
   â”‚ AuthMiddleware.verifyAuth()
   â”‚ â”œâ”€ Check Authorization header
   â”‚ â”œâ”€ Validate Bearer Token
   â”‚ â””â”€ Return 401 if invalid
   â”‚
   â–¼

3. SmsRoutes.setupSmsRoutes()
   â”‚
   â”‚ POST /api/sms/queue handler:
   â”‚ â”œâ”€ Validate phone number (SecurityUtils)
   â”‚ â”œâ”€ Sanitize phone number
   â”‚ â”œâ”€ Parse scheduledTime (DateTimeHelper)
   â”‚ â”œâ”€ Calculate sendTime = scheduledTime - 24h
   â”‚ â””â”€ If sendTime < now â†’ sendTime = now
   â”‚
   â–¼

4. SmsDao.insertMessage()
   â”‚
   â”‚ Insert into database:
   â”‚ â”œâ”€ status: QUEUED
   â”‚ â”œâ”€ queuedAt: now
   â”‚ â”œâ”€ scheduledFor: sendTime
   â”‚ â””â”€ Save externalId, clientName, etc.
   â”‚
   â–¼

5. Response to External App
   â”‚
   â”‚ 201 Created
   â”‚ {
   â”‚   success: true,
   â”‚   smsId: "sms_123",
   â”‚   status: "QUEUED",
   â”‚   estimatedSendTime: "2025-10-27T14:00:00Z"
   â”‚ }
   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   ... WAIT (Scheduler checks every 60s) ...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCHEDULER LOOP (Every 60s)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. SmsSchedulerService (Background)
   â”‚
   â”‚ Loop iteration:
   â”‚ â”œâ”€ Call SmsDao.getPendingMessages(now)
   â”‚ â”œâ”€ Found: SMS with scheduledFor <= now
   â”‚ â”œâ”€ Check: isWithinSendingHours(8-21) â†’ YES
   â”‚ â”œâ”€ Check: retryCount < maxRetries â†’ YES
   â”‚ â””â”€ Call SmsSenderService.sendSms(message)
   â”‚
   â–¼

7. SmsSenderService.sendSms()
   â”‚
   â”‚ Step 1: Update status â†’ SENDING
   â”‚ â”œâ”€ SmsDao.updateMessage(status = SENDING)
   â”‚ â””â”€ LogManager.i("SMS", "Attempting to send...")
   â”‚
   â”‚ Step 2: Create PendingIntents
   â”‚ â”œâ”€ sentIntent (action: SMS_SENT, smsId)
   â”‚ â””â”€ deliveredIntent (action: SMS_DELIVERED, smsId)
   â”‚
   â”‚ Step 3: Send SMS
   â”‚ â”œâ”€ SmsManager.sendTextMessage(
   â”‚ â”‚     phoneNumber,
   â”‚ â”‚     null,
   â”‚ â”‚     message,
   â”‚ â”‚     sentIntent,
   â”‚ â”‚     deliveredIntent
   â”‚ â”‚  )
   â”‚ â””â”€ Return Result.success()
   â”‚
   â–¼

8. Android SMS System
   â”‚
   â”‚ SMS sent to operator...
   â”‚ â””â”€ Broadcast: SMS_SENT
   â”‚
   â–¼

9. DeliveryReceiver.onReceive()
   â”‚
   â”‚ Action: SMS_SENT
   â”‚ â”œâ”€ Extract smsId from Intent
   â”‚ â”œâ”€ Check resultCode:
   â”‚ â”‚   â€¢ RESULT_OK â†’ status = SENT
   â”‚ â”‚   â€¢ RESULT_ERROR_* â†’ status = FAILED
   â”‚ â”œâ”€ SmsSenderService.updateMessageStatus(smsId, status)
   â”‚ â””â”€ LogManager.i("SMS", "SMS sent successfully")
   â”‚
   â–¼

10. SmsDao.updateMessage()
    â”‚
    â”‚ Update database:
    â”‚ â”œâ”€ status: SENT
    â”‚ â”œâ”€ sentAt: now
    â”‚ â””â”€ Log entry created
    â”‚
    â–¼

    ... WAIT (Operator confirms delivery) ...

11. Android SMS System
    â”‚
    â”‚ Delivery report received...
    â”‚ â””â”€ Broadcast: SMS_DELIVERED
    â”‚
    â–¼

12. DeliveryReceiver.onReceive()
    â”‚
    â”‚ Action: SMS_DELIVERED
    â”‚ â”œâ”€ Check resultCode:
    â”‚ â”‚   â€¢ RESULT_OK â†’ status = DELIVERED
    â”‚ â”‚   â€¢ RESULT_CANCELED â†’ status = NOT_DELIVERED
    â”‚ â”œâ”€ SmsSenderService.updateMessageStatus(smsId, DELIVERED)
    â”‚ â””â”€ LogManager.i("SMS", "SMS delivered")
    â”‚
    â–¼

13. SmsDao.updateMessage()
    â”‚
    â”‚ Update database:
    â”‚ â”œâ”€ status: DELIVERED
    â”‚ â”œâ”€ deliveredAt: now
    â”‚ â””â”€ Log entry created
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

14. EXTERNAL APP (TypeScript) - Check Status
    â”‚
    â”‚ GET /api/sms/status/sms_123
    â”‚
    â–¼

15. KtorServer â†’ SmsRoutes
    â”‚
    â”‚ GET /api/sms/status/:id handler:
    â”‚ â”œâ”€ Verify auth
    â”‚ â”œâ”€ SmsDao.getMessageById(123)
    â”‚ â””â”€ Return status
    â”‚
    â–¼

16. Response to External App
    â”‚
    â”‚ 200 OK
    â”‚ {
    â”‚   success: true,
    â”‚   sms: {
    â”‚     id: "sms_123",
    â”‚     status: "DELIVERED",
    â”‚     sentAt: "2025-10-27T14:00:05Z",
    â”‚     deliveredAt: "2025-10-27T14:00:12Z"
    â”‚   }
    â”‚ }
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

END FLOW
```

***

## ğŸ“Œ NAMING CONVENTIONS - WAÅ»NE UWAGI

### âš ï¸ Aby uniknÄ…Ä‡ konfliktÃ³w nazw:

1. **Package name MUSI byÄ‡ dokÅ‚adnie**:
   ```
   com.smsgateway.beauty
   ```

2. **Nazwy klas sÄ… case-sensitive**:
   - âœ… `SmsMessage` (poprawne)
   - âŒ `SMSMessage` (bÅ‚Ä™dne)
   - âŒ `smsMessage` (bÅ‚Ä™dne)

3. **Extension functions sÄ… w osobnych plikach**:
   - Plik: `AuthMiddleware.kt` â†’ Function: `ApplicationCall.verifyAuth()`
   - Plik: `SmsRoutes.kt` â†’ Function: `Route.setupSmsRoutes()`
   - Plik: `WebRoutes.kt` â†’ Function: `Route.setupWebRoutes()`

4. **Singletons uÅ¼ywajÄ… `object`**:
   ```kotlin
   object LogManager { ... }  // NIE class LogManager
   ```

5. **Entities MUSZÄ„ mieÄ‡ @Entity annotation**:
   ```kotlin
   @Entity(tableName = "sms_messages")
   data class SmsMessage(...)
   ```

6. **DAOs MUSZÄ„ byÄ‡ interface z @Dao**:
   ```kotlin
   @Dao
   interface SmsDao { ... }  // NIE class SmsDao
   ```

7. **Enums uÅ¼ywajÄ… enum class**:
   ```kotlin
   enum class SmsStatus { ... }
   ```

***

To kompletna lista wszystkich klas i szczegÃ³Å‚owy diagram architektury systemu! ğŸ‰

Å¹rÃ³dÅ‚a
